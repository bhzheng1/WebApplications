<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <![endif]-->
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>demo2</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="" />
  </head>
  <body>
    <!--[if lt IE 7]>
      <p class="browsehappy">
        You are using an <strong>outdated</strong> browser. Please
        <a href="#">upgrade your browser</a> to improve your experience.
      </p>
    <![endif]-->
    <input type="text" id="input" />
    <p id="error">no more than 20</p>
    <script async defer>
      var input = document.getElementById("input");
      var errorMsg = document.getElementById("error");

      var state = {
        value: "",
        error: false,
      };

      var setState = function (newState) {
        state = {
          ...state,
          ...newState,
        };
        render();
      };

      var render = function () {
        input.value = state.value;
        if (state.error) {
          errorMsg.style.display = "block";
        } else {
          errorMsg.style.display = "none";
        }
      };

      var handleInput = function (value) {
        if (value.length > 20) {
          setState({
            error: true,
          });
        } else {
          setState({
            value: value,
            error: false,
          });
        }
      };

      input.addEventListener("input", function () {
        handleInput(this.value);
      });
    </script>
  </body>
</html>
