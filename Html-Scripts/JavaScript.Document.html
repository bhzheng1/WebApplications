<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body><!-- I am a comment-->

<script type="module">
    //modifying document
    let div = document.createElement("div");
    let textNode = document.createTextNode("Here I am");
    let commentNode = document.createComment("comment created by js");

    document.body.appendChild(div);
    document.body.appendChild(textNode);
    document.body.appendChild(commentNode);

</script>

<script type="module">
    console.log("==================我是分割线=====================");
    //Dom has lots of nodes, including document node, element node, text node, and comment node, 它们都是js的对象
    //element node is one of most important Dom node, and can be walked by Element-only navigation
    //document.documentElement is node of <html> tag, document.body <body>, document.head <head>
    //每个document tag都有相应的node，他们一般都是document.body的child node，是document结构上的包含而非继承关系

    // Each DOM node belongs to a certain class. The classes form a hierarchy.
    // The full set of properties and methods come as the result of inheritance.
    // Dom node class are described not using JavaScript, but a special Interface description language (IDL)

    for (let node of document.body.childNodes) {
        console.log(node);
    }

    console.log(document.documentElement.parentNode);
    console.log(document.documentElement.parentElement);

    console.log(document.body.parentNode);
    console.log(document.body.parentElement);

    console.log(document.head.nextSibling);
    console.log(document.head.nextElementSibling);

    console.log(document.body.previousSibling);
    console.log(document.body.previousElementSibling);

    for (let element of document.body.children) {
        console.log(element);
    }

    console.log(document.body.constructor.name); //DOM节点的类名
    console.log(document.body); //显示DOM树
    console.dir(document.body); //将元素视为 DOM 对象，以便更好地探究它的属性。
    console.log(document.body.firstChild.tagName);//tagName 属性仅用于 Element 节点
    console.log(document.body.firstChild.nodeName);//nodeName 是为任意 Node 定义的
    console.log(document.body.firstChild.nodeValue);
    console.log(document.body.firstChild.data);
</script>

<input id="input" type="checkbox" checked> checkbox
<div id="div" style="color:red;font-size:120%">Hello</div>
<a id="a" href="#hello">link</a>
<script type="module">
    //DOM 上的属性和方法其实就像是一个标准的 Javascript 对象
    document.body.myData = {
        name: "Merrick",
        title: "Developer",
        sayTagName: function () {
            console.log(this.tagName);
        }
    };
    console.log(document.body.myData.title);

    //还可以修改内置属性的原型
    HTMLElement.prototype.sayHi = function () {
        console.log(`Hello, I'm ${this.tagName}`);
    };
    document.body.sayHi();

    //Properties – is what’s in DOM objects.
    console.log("==================我是分割线=====================");
    console.log(input.getAttribute('checked')); // 特性值是：空字符串
    console.log(input.checked); // 属性的值是：true
    console.log(div.getAttribute("style"));
    console.log(div.style);
    console.log(div.style.color);

    console.log(a.href); //DOM property,绝对路径
    console.log(a.getAttribute("href"));//element attribute，特性值 #hello

</script>

<div id="test" customAttribute="non-standard"></div>
<div show-info="name"></div>
<!-- and age here -->
<div show-info="age"></div>

<div id="order" class="order" data-order-state="new">A new order.</div>
<style>
    /* styles rely on the custom attribute "order-state" */
    .order[data-order-state="new"] {
        color: green;
    }

    .order[data-order-state="pending"] {
        color: blue;
    }

    .order[data-order-state="canceled"] {
        color: red;
    }
</style>

<script type="module">
    // For element nodes, most standard HTML attributes automatically become properties of DOM objects.
    // In HTML, tags may have attributes. When the browser parses the HTML to create DOM objects for tags,
    // it recognizes standard attributes and creates DOM properties from them.
    // Attributes – is what’s written in HTML.
    console.log("==================我是分割线=====================");
    console.log(test.id); //test
    console.log(test.customAttribute);//undefined
    console.log(test.getAttribute("customAttribute"));//non-standard
    console.log(test.hasAttribute("id"));
    console.log(test.setAttribute("about", "test sample"));
    console.log(test.outerHTML);
    for (let attr of test.attributes) {
        console.log(`${attr.name} = ${attr.value}`);
    }
    test.removeAttribute("about");

    //Non-standard attributes, dataset
    let user = {
        name: "Peter",
        age: 25
    };
    for (let div of document.querySelectorAll("[show-info]")) {
        let field = div.getAttribute("show-info");
        div.innerHTML = user[field];
    }

    //All attributes starting with “data-” are reserved for programmers’ use. They are available in the dataset property
    // data-about = elem.dataset.about; data-order-state = elem.dataset.orderState
    console.log(order.dataset.orderState);
    order.dataset.orderState = "pending";
    console.log(order.dataset.orderState);
</script>

<input type="text" id="elem4" value="value">
<script type="module">
    console.log("==================我是分割线=====================");
    console.log(elem4.id);
    console.log(elem4.type);
    console.log(elem4.value);
</script>

<div id="elem3">JavaScript assigned the property "hidden"</div>
<div hidden>with the attribute "hidden"</div>
<script type="module">
    elem3.hidden = true;
    setInterval(() => elem3.hidden = !elem3.hidden, 10000);
</script>

<div id="elem1"></div>
<div id="elem2"></div>
<script type="module">
    let name = prompt("What's your name?", "<b>Winnie-the-pooh!</b>");
    elem1.innerHTML = name;
    elem2.textContent = name;
</script>

<div id="news">
    <h1>Headline!</h1>
    <p>Martians attack people!</p>
</div>
<script type="module">
    //textContent
    console.log(news.textContent);
</script>

<div id="innerHtml"></div>
<script type="module">
    console.dir(innerHtml.innerHTML);//innerHTML 属性仅对元素节点有效
    innerHtml.innerHTML = "The new BODY!"; //replace it
    console.log(innerHtml.outerHTML);//innerHTML 加上元素本身
    innerHtml.outerHTML = "<p>A new element!</p>"; //innerHtml was completely replaced
</script>

<div id="elem">Begin</div>
<ul>
    <li>Information</li>
</ul>
<div id="elem-content">End</div>
<script type="module">
    console.log(elem); //如果元素有 id 属性，那么该 id 也会有一个同名全局变量,除非我们自己声明同名变量把它覆盖
    console.log(window.elem);
    console.log(window["elem-content"]); //因为有-使用[]保持词的完整性
    console.log(document.getElementById('elem'));
    let divs = document.getElementsByTagName('div');
</script>

<table id="table">
    <caption>Table1</caption>
    <thead>
    <tr>
        <th>head1</th>
        <th>head2</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>one</td>
        <td>two</td>
    </tr>
    <tr>
        <td>three</td>
        <td>four</td>
    </tr>
    </tbody>
    <tfoot>
    <tr>
        <td>foot1</td>
        <td>foot2</td>
    </tr>
    <tr>
        <td>Your age:</td>
        <td>
            <label>
                <input type="radio" name="age" value="young" checked> less than 18
            </label>
            <label>
                <input type="radio" name="age" value="mature"> from 18 to 50
            </label>
            <label>
                <input type="radio" name="age" value="senior"> more than 60
            </label>
        </td>
    </tr>
    </tfoot>
</table>
<script type="module">
    console.log(document.body.getElementsByTagName("table")[0].caption.innerHTML);

    let inputs = table.getElementsByTagName('input');

    for(let input of inputs){
        console.log(input.value + ': ' + input.checked);
    }
</script>

<ul>
    <li>The</li>
    <li>test</li>
</ul>
<ul>
    <li>has</li>
    <li>passed</li>
</ul>
<script>
    //matches检查类型是否匹配
    let elements = document.querySelectorAll('ul > li:last-child');

    for (let elem of elements) {
        alert(elem.innerHTML); // "test", "passed"
    }
</script>

<a href = "http://example.com/file.zip">...</a>
<a href = "http://ya.ru">...</a>
<script>
    for (let elem of document.body.children){
        if(elem.matches('a[href$="zip"]')){
            console.log("The archive reference: "+elem.href);
        }
    }
</script>

<h1>Contents</h1>

<div class="contents">
    <ul class="book">
        <li class="chapter">Chapter 1</li>
        <li class="chapter">Chapter 1</li>
    </ul>
</div>

<script>
    //closet查找最近的父类

    let chapter = document.querySelector('.chapter'); // LI

    alert(chapter.closest('.book')); // UL
    alert(chapter.closest('.contents')); // DIV

    alert(chapter.closest('h1')); // null（因为 h1 不是祖先）
</script>

<div>First div</div>
<script>
    //All methods "getElementsBy*" return a live collection.
    //In contrast, querySelectorAll returns a static collection
    let byDivs = document.getElementsByTagName('div');
    console.log(byDivs); //1
    let allDivs = document.querySelectorAll('div');
    console.log(allDivs); //1
</script>
<div>Second div</div>
<script>
    console.log(byDivs); //2
    console.log(allDivs);//1
</script>


</body>
</html>
